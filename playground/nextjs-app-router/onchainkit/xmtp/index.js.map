{"version":3,"sources":["../../src/xmtp/getXmtpFrameMessage.ts","../../src/xmtp/isXmtpFrameRequest.ts"],"sourcesContent":["import { validateFramesPost } from '@xmtp/frames-validator';\nimport type { XmtpOpenFramesRequest } from '@xmtp/frames-validator';\n\nexport async function getXmtpFrameMessage(payload: XmtpOpenFramesRequest) {\n  if (!payload.clientProtocol || !payload.clientProtocol.startsWith('xmtp@')) {\n    return {\n      isValid: false,\n      message: undefined,\n    };\n  }\n  try {\n    const { actionBody, verifiedWalletAddress } =\n      await validateFramesPost(payload);\n    return {\n      isValid: true,\n      message: {\n        ...actionBody,\n        timestamp: actionBody.timestamp.toNumber(),\n        verifiedWalletAddress,\n        identifier: verifiedWalletAddress,\n      },\n    };\n  } catch (_e) {\n    return {\n      isValid: false,\n      message: undefined,\n    };\n  }\n}\n","import type { XmtpOpenFramesRequest } from '@xmtp/frames-validator';\n\nexport function isXmtpFrameRequest(\n  /* biome-ignore lint: code needs to be refactored */\n  payload: any,\n): payload is XmtpOpenFramesRequest {\n  return (\n    !!payload &&\n    !!payload.untrustedData &&\n    !!payload.trustedData &&\n    !!payload.clientProtocol?.startsWith('xmtp@')\n  );\n}\n"],"mappings":";;;;AAAA,SAASA,0BAA0B;AAGnC,eAAsBC,oBAAoBC,SAA8B;AACtE,MAAI,CAACA,QAAQC,kBAAkB,CAACD,QAAQC,eAAeC,WAAW,OAAA,GAAU;AAC1E,WAAO;MACLC,SAAS;MACTC,SAASC;IACX;EACF;AACA,MAAI;AACF,UAAM,EAAEC,YAAYC,sBAAqB,IACvC,MAAMC,mBAAmBR,OAAAA;AAC3B,WAAO;MACLG,SAAS;MACTC,SAAS;QACP,GAAGE;QACHG,WAAWH,WAAWG,UAAUC,SAAQ;QACxCH;QACAI,YAAYJ;MACd;IACF;EACF,SAASK,IAAI;AACX,WAAO;MACLT,SAAS;MACTC,SAASC;IACX;EACF;AACF;AAzBsBN;;;ACDf,SAASc,mBAEdC,SAAY;AAEZ,SACE,CAAC,CAACA,WACF,CAAC,CAACA,QAAQC,iBACV,CAAC,CAACD,QAAQE,eACV,CAAC,CAACF,QAAQG,gBAAgBC,WAAW,OAAA;AAEzC;AAVgBL;","names":["validateFramesPost","getXmtpFrameMessage","payload","clientProtocol","startsWith","isValid","message","undefined","actionBody","verifiedWalletAddress","validateFramesPost","timestamp","toNumber","identifier","_e","isXmtpFrameRequest","payload","untrustedData","trustedData","clientProtocol","startsWith"]}